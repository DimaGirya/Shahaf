<!DOCTYPE html>
<html lang="en">
<head>
    <script src = "jquery-2.2.4.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlas</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }

    body{
        background-color: #000000;
    }

    #wrapper{
        display: block;
    }

    img{
        width: 30%;
        position: absolute;
    }

    #wrapper > div{
        /*display: inline-block;*/
        /*position: absolute;*/
    }

    #story0{
        left: 1%;
        top: 1%;
    }

    #story1 > img{
        top: 90%;
        left: 10%;
    }

    #story2 > img{
        top: 60%;
    }

    #element0{
        left: 8%;
        top: 80%;
    }

    #story3 > img{
        left: 30%;
        top: 40%;
    }

    #story4 > img{
        left: 25%;
        top: 85%;
    }

    #story5 > img{
        right: 10%;
        top: 70%;
    }

    #story6 > img{
        left: 25%;
        top: 125%;
    }

    /*9 stories*/
    /*11 elements*/


</style>
<body>
    <div id="wrapper">
       <div id="story0" class="story">
           <audio class="storiesAudio"><source src="audio/Cody.mp3"></source></audio>
           <img src="images/static/CODY.png">
       </div><br><br>
        <div id="story1" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/.png">
        </div>
        <div id="story2" class="story">
            <audio class="storiesAudio"><source src="audio/Anna.mp3"></source></audio>
            <img src="images/static/anna-bana.png">
        </div>
        <div id="story3" class="story">
            <audio class="storiesAudio"><source src="audio/James.mp3"></source></audio>
            <img src="images/static/JAMES.png">
        </div>
        <div id="story4" class="story">
            <audio class="storiesAudio"><source src="audio/Jessica.mp3"></source></audio>
            <img src="images/static/jess.png">
        </div>
        <div id="story5" class="story">
            <audio class="storiesAudio"><source src="audio/Venessa.mp3"></source></audio>
            <img src="images/static/VANESSA.png">
        </div>
        <div id="story6" class="story">
            <audio class="storiesAudio"><source src="audio/Alyssa.mp3"></source></audio>
            <img src="images/static/ALYSSA.png">
        </div>
        <div id="story7" class="story">
            <audio class="storiesAudio"><source src="audio/.mp3"></source></audio>
            <img src="images/static/story7.jpg">
        </div>
        <div id="story8" class="story">
            <audio class="storiesAudio"><source src="audio/.mp3"></source></audio>
            <img src="images/static/story8.jpg">
        </div>
        <div id="story9" class="story">
            <audio class="storiesAudio"><source src="audio/.mp3"></source></audio>
            <img src="images/static/story9.jpg">
        </div>
        <div id="element0">
            <img src="images/static/element0.jpg">
        </div>
        <div id="element1">
            <img src="images/static/element1.jpg">
        </div>
        <div id="element2">
            <img src="images/static/element2.jpg">
        </div>
        <div id="element3">
            <img src="images/static/element3.jpg">
        </div>
        <div id="element4">
            <img src="images/static/element4.jpg">
        </div>
        <div id="element5">
            <img src="images/static/element5.jpg">
        </div>
        <div id="element6">
            <img src="images/static/element6.jpg">
        </div>
        <div id="element7">
            <img src="images/static/element7.jpg">
        </div>
        <div id="element8">
            <img src="images/static/element8.jpg">
        </div>
        <div id="element9">
            <img src="images/static/element9.jpg">
        </div>
        <div id="element8">
            <img src="images/static/element10.jpg">
        </div>
        <div id="element8">
            <img src="images/static/element11.jpg">
        </div>
    </div>

    <script>

        $('.story > img').hover(function(){animate(this)}, function(){reset(this)});

        var stories_animations_urls = {
            "story0": "images/animations/CODY.gif",
            "story1": "images/animations/rose_pepsi108.gif",
            "story2": "images/animations/anna-bana.gif",
            "story3": "images/animations/JAMES.gif",
            "story4": "images/animations/jess.gif",
            "story5": "images/animations/VANESSA.gif",
            "story6": "images/animations/ALYSSA.gif",
            "story7": "images/animations/rose_pepsi108.gif",
            "story8": "images/animations/rose_pepsi108.gif",
        }

        var stories_original_urls = {
            "story0": "images/static/CODY.png",
            "story1": "images/static/rose_pepsi000.png",
            "story2": "images/static/anna-bana.png",
            "story3": "images/static/JAMES.png",
            "story4": "images/static/jess.png",
            "story5": "images/static/VANESSA.png",
            "story6": "images/static/ALYSSA.png",
            "story7": "images/static/el1.png",
            "story8": "images/static/el2.png",
        };

        var animate = function (img) {
            var element =  $(img).parent()[0];
            var animation_url = stories_animations_urls[element.id] + "?p" + new Date().getTime();//workaroud gif caching
            img.src = animation_url;
                play_story(element.id);
        }

        var reset = function (image) {
            var element =  $(image).parent()[0];
            image.src = stories_original_urls[element.id];
                pause_story(element.id);
        }

        function play_story(story){
            var audio = $("#"+story).children('audio')[0];
            audio.play();
        }

        function pause_story(story) {
            var audio = $("#"+story).children('audio')[0];
            audio.pause();
            audio.currentTime = 0; //reset sound on mouse out
        }

        var elements_animation_urls = {
            "element0": "images/animations/light.gif",
            "element1": "images/animations/light.gif",
            "element2": "images/animations/light.gif",
            "element3": "images/animations/light.gif",
            "element4": "images/animations/light.gif",
            "element5": "images/animations/light.gif",
            "element6": "images/animations/light.gif",
            "element7": "images/animations/light.gif",
            "element8": "images/animations/light.gif"
        }

        var elements_original_urls = {
            "element0": "images/static/el2.jpg",
            "element1": "images/static/el2.jpg",
            "element2": "images/static/el2.jpg",
            "element3": "images/static/el2.jpg",
            "element4": "images/static/el2.jpg",
            "element5": "images/static/el2.jpg",
            "element6": "images/static/el2.jpg",
            "element7": "images/static/el2.jpg",
            "element8": "images/static/el2.jpg"
        }

        //var animate_interval = setInterval(random_animate, 2000);

        function random_animate() {
            var element_id = pick_random_element(elements_animation_urls);
            console.log("now animating "+ element_id);
            console.log(element_id);
            var animation_url = elements_animation_urls[element_id] + "?p" + new Date().getTime();//workaroud gif caching.
            $("#"+element_id).children()[0].src = animation_url;
            var reset_interval = setInterval(random_reset(), 2000);
            }

            function random_reset() {
                var element = pick_random_element(elements_animation_urls);
                console.log("now reseting" + element);
                var img = $("#"+element).children()[0];
                img.src = elements_original_urls[element];
            }

            function pick_random_element(elements) {
                var element_id;
                var counter = 0;
                for (var element in elements) {
                    if (Math.random() < 1 / ++counter) {
                        element_id = element;
                    }
                }
                return element_id;
            }
    </script>
</body>
</html>