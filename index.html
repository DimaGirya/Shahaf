<!DOCTYPE html>
<html lang="en">
<head>
    <script src = "jquery-2.2.4.min.js"></script>
    <meta charset="UTF-8">
    <title>Atlas</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }

    body{
        background-color: #000000;
        /*color: #ffffff;*/
    }

    #wrapper{
        width: 1920px;
        height: 1950px;
        display: block;
    }

    #wrapper > div{
        display: inline-block;
        position: absolute;
    }

    #story0{
        left: 8%;
        top: 9%;
    }

    #story1{
        left: 50%;
        top: 3%;
    }

    #story2{
        left: 70%;
        top: 8%;
    }

    #element1{
        left: 8%;
        top: 60%;
    }

</style>
<body>
    <div id="wrapper">
       <div id="story0" class="story">
           <audio class="storiesAudio"><source src="audio/ain't_nobody.mp3"></source></audio>
           <img src="images/static/story0.jpg">
       </div>
        <div id="story1" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story1.jpg">
        </div>
        <div id="story2" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story2.jpg">
        </div>
        <div id="element0">
            <img src="images/static/element0.jpg">
        </div>
        <div id="element1">
            <img src="images/static/element1.jpg">
        </div>
        <div id="element2">
            <img src="images/static/element2.jpg">
        </div>
        <div id="story3" class="story">
            <audio class="storiesAudio"><source src="audio/ain't_nobody.mp3"></source></audio>
            <img src="images/static/story3.jpg">
        </div>
        <div id="story4" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story4.jpg">
        </div>
        <div id="story5" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story5.jpg">
        </div>
        <div id="story6" class="story">
            <audio class="storiesAudio"><source src="audio/ain't_nobody.mp3"></source></audio>
            <img src="images/static/story6.jpg">
        </div>
        <div id="story7" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story7.jpg">
        </div>
        <div id="story8" class="story">
            <audio class="storiesAudio"><source src="audio/locked_away.mp3"></source></audio>
            <img src="images/static/story8.jpg">
        </div>
        <div id="element3">
            <img src="images/static/element3.jpg">
        </div>
        <div id="element4">
            <img src="images/static/element4.jpg">
        </div>
        <div id="element5">
            <img src="images/static/element5.jpg">
        </div>
        <div id="element6">
            <img src="images/static/element6.jpg">
        </div>
        <div id="element7">
            <img src="images/static/element7.jpg">
        </div>
        <div id="element8">
            <img src="images/static/element8.jpg">
        </div>
    </div>

    <script>

        $('.story > img').hover(function(){animate(this)}, function(){reset(this)});

        var stories_animations_urls = {
            "story0": "images/animations/rose_pepsi108.png",
            "story1": "images/animations/rose_pepsi108.png",
            "story2": "images/animations/rose_pepsi108.png",
            "story3": "images/animations/rose_pepsi108.png",
            "story4": "images/animations/rose_pepsi108.png",
            "story5": "images/animations/rose_pepsi108.png",
            "story6": "images/animations/rose_pepsi108.png",
            "story7": "images/animations/rose_pepsi108.png",
            "story8": "images/animations/rose_pepsi108.png",
        }

        var stories_original_urls = {
            "story0": "images/static/el0.jpg",
            "story1": "images/static/el1.jpg",
            "story2": "images/static/el2.jpg",
            "story3": "images/static/el2.jpg",
            "story4": "images/static/el2.jpg",
            "story5": "images/static/el2.jpg",
            "story6": "images/static/el0.jpg",
            "story7": "images/static/el1.jpg",
            "story8": "images/static/el2.jpg",
        };

        var animate = function (img) {
            var element =  $(img).parent()[0];
            var animation_url = stories_animations_urls[element.id] + "?p" + new Date().getTime();//workaroud gif caching.
            img.src = animation_url;
                play_story(element.id);
        }

        var reset = function (image) {
            var element =  $(image).parent()[0];
            image.src = stories_original_urls[element.id];
                pause_story(element.id);
        }

        function play_story(story){
            var audio = $("#"+story).children('audio')[0];
            audio.play();
        }

        function pause_story(story) {
            var audio = $("#"+story).children('audio')[0];
            audio.pause();
            audio.currentTime = 0; //reset sound on mouse out
        }

        var elements_animation_urls = {
            "element0": "images/animations/light.gif",
            "element1": "images/animations/light.gif",
            "element2": "images/animations/light.gif",
            "element3": "images/animations/light.gif",
            "element4": "images/animations/light.gif",
            "element5": "images/animations/light.gif",
            "element6": "images/animations/light.gif",
            "element7": "images/animations/light.gif",
            "element8": "images/animations/light.gif"
        }

        var elements_original_urls = {
            "element0": "images/static/el2.jpg",
            "element1": "images/static/el2.jpg",
            "element2": "images/static/el2.jpg",
            "element3": "images/static/el2.jpg",
            "element4": "images/static/el2.jpg",
            "element5": "images/static/el2.jpg",
            "element6": "images/static/el2.jpg",
            "element7": "images/static/el2.jpg",
            "element8": "images/static/el2.jpg"
        }

        //var animate_interval = setInterval(random_animate, 2000);

        function random_animate() {
            var element_id = pick_random_element(elements_animation_urls);
            console.log("now animating "+ element_id);
            console.log(element_id);
            var animation_url = elements_animation_urls[element_id] + "?p" + new Date().getTime();//workaroud gif caching.
            $("#"+element_id).children()[0].src = animation_url;
            var reset_interval = setInterval(random_reset(), 2000);
            }

            function random_reset() {
                var element = pick_random_element(elements_animation_urls);
                console.log("now reseting" + element);
                var img = $("#"+element).children()[0];
                img.src = elements_original_urls[element];
            }

            function pick_random_element(elements) {
                var element_id;
                var counter = 0;
                for (var element in elements) {
                    if (Math.random() < 1 / ++counter) {
                        element_id = element;
                    }
                }
                return element_id;
            }
    </script>
</body>
</html>