<!DOCTYPE html>
<html lang="en">
<head>
    <script src = "script/jquery-2.2.4.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlas</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }

    body{
        background-color: #000000;
    }

    #wrapper{
        display: block;
    }

    img{
        position: absolute;
    }

    .story > img, #title > img{
        width: 30%;
    }

    .element > img{
        width: 15%
    }

    #wrapper > div{
        /*display: inline-block;*/
        /*position: absolute;*/
    }

    #title > img{
        left: 33%;
        top: -20%;
    }

    #story0 > img{
        z-index: -2;
    }

    #story1 > img{
        top: 60%;
        z-index: -2;
    }

    #story2 > img{
        left: 35%;
        top: 30%;
        /*z-index: 1;*/
    }

    #story3 > img{
        left: 34%;
        top: 106%;
    }

    #story4 > img{
        right: 6%;
        top: 68%;
        z-index: 1;
    }

    #story5 > img{
        left: 36%;
        top: 156%;
        z-index: -1;
    }

    #story6 > img{
        right: 7%;
        top: 12%;
        z-index: 1;
    }

    #story7 > img{
        right: -2%;
        top: 126%;
    }

    #story8 > img{
        top: 135%;
    }

    #element0 > img{
        top: 45%;
        left: 20%;
    }

    #element1 > img{
        top: 82%;
        left: 27%;
        z-index: 1;
    }

    #element2 > img{
        top: 57%;
        right: 1%;
        z-index: 1;
    }

    #element3 > img{
        right: 32%;
        top: 83%;
    }

    #element4 > img{
        top: 116%;
    }

    #element5 > img{
        top: 128%;
        left: 23%;
    }

    #element6 > img{
        right: 25%;
        top: 140%;
    }

    #element6 > img{
        right: 25%;
        top: 140%;
    }

    #element7 > img{
        left: 24%;
        top: 167%;
        z-index: -2;
    }

    #element8 > img{
        right: 12%;
        top: 175%;
    }

</style>
<body>
    <div id="wrapper">
        <div id="Best Countries">
            <audio class="storiesAudio" autoplay><source src="audio/title.mp3"></source></audio>
            <img src="images/animations/title.gif">
        </div>
       <div id="story0" class="story">
           <audio class="storiesAudio"><source src="audio/Cody.mp3"></source></audio>
           <img src="images/static/CODY.png">
       </div>
        <div id="story1" class="story">
            <audio class="storiesAudio"><source src="audio/Anna.mp3"></source></audio>
            <img src="images/static/anna-bana.png">
        </div>
        <div id="story2" class="story">
            <audio class="storiesAudio"><source src="audio/James.mp3"></source></audio>
            <img src="images/static/JAMES.png">
        </div>
        <div id="story3" class="story">
            <audio class="storiesAudio"><source src="audio/Jessica.mp3"></source></audio>
            <img src="images/static/jess.png">
        </div>
        <div id="story4" class="story">
            <audio class="storiesAudio"><source src=""></source></audio>
            <img src="images/static/VANESSA.png">
        </div>
        <div id="story5" class="story">
            <audio class="storiesAudio"><source src="audio/Alyssa.mp3"></source></audio>
            <img src="images/static/ALYSSA.png">
        </div>
        <div id="story6" class="story">
            <audio class="storiesAudio"><source src="audio/Rebekah.mp3"></source></audio>
            <img src="images/static/rebekah.png">
        </div>
        <div id="story7" class="story">
            <audio class="storiesAudio"><source src="audio/Angel.mp3"></source></audio>
            <img src="images/static/angel.png">
        </div>
        <div id="story8" class="story">
            <audio class="storiesAudio"><source src="audio/Rose.mp3"></source></audio>
            <img src="images/static/rose.png">
        </div>
        <div id="element0" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/lips.png">
        </div>
        <div id="element1" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/chief.png">
        </div>
        <div id="element2" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/eagle.png">
        </div>
        <div id="element3" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/football.png">
        </div>
        <div id="element4" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/boot.png">
        </div>
        <div id="element5" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/dice.png">
        </div>
        <div id="element6" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/cards.png">
        </div>
        <div id="element7" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/stars.png">
        </div>
        <div id="element8" class="element">
            <audio class="storiesAudio"><source src="audio/random.mp3"></source></audio>
            <img src="images/static/kaktus.png">
        </div>
    </div>

    <script>

        $('.story > img').hover(function(){animate(this)}, function(){reset(this)});

        var stories_animations_urls = {
            "story0": "images/animations/CODY.gif",
            "story1": "images/animations/anna-bana.gif",
            "story2": "images/animations/JAMES.gif",
            "story3": "images/animations/jess.gif",
            "story4": "images/animations/VANESSA.gif",
            "story5": "images/animations/ALYSSA.gif",
            "story6": "images/animations/rebekah.gif",
            "story7": "images/animations/angel.gif",
            "story8": "images/animations/rose.gif"
        }

        var stories_original_urls = {
            "story0": "images/static/CODY.png",
            "story1": "images/static/anna-bana.png",
            "story2": "images/static/JAMES.png",
            "story3": "images/static/jess.png",
            "story4": "images/static/VANESSA.png",
            "story5": "images/static/ALYSSA.png",
            "story6": "images/static/rebekah.png",
            "story7": "images/static/angel.png",
            "story8": "images/static/rose.png"
        };

        var animate = function (img) {
            var element =  $(img).parent()[0];
            var animation_url = stories_animations_urls[element.id] + "?p" + new Date().getTime();//workaroud gif caching
            img.src = animation_url;
                play_story(element.id);
        }

        var reset = function (image) {
            var element =  $(image).parent()[0];
            image.src = stories_original_urls[element.id];
                pause_story(element.id);
        }

        function play_story(story){
            var audio = $("#"+story).children('audio')[0];
            audio.play();
        }

        function pause_story(story) {
            var audio = $("#"+story).children('audio')[0];
            audio.pause();
            audio.currentTime = 0; //reset sound on mouse out
        }

        var elements_animation_urls = {
            "element0": "images/animations/lips.gif",
            "element1": "images/animations/chief.gif",
            "element2": "images/animations/eagle.gif",
            "element3": "images/animations/football.gif",
            "element4": "images/animations/boot.gif",
            "element5": "images/animations/dice.gif",
            "element6": "images/animations/cards.gif",
            "element7": "images/animations/stars.gif",
            "element8": "images/animations/kaktus.gif"
        }

        var elements_original_urls = {
            "element0": "images/static/lips.png",
            "element1": "images/static/chief.png",
            "element2": "images/static/eagle.png",
            "element3": "images/static/football.png",
            "element4": "images/static/boot.png",
            "element5": "images/static/dice.png",
            "element6": "images/static/cards.png",
            "element7": "images/static/stars.png",
            "element8": "images/static/kaktus.png"
        }

        var animate_interval = setInterval(random_animate, 2000);

        function random_animate() {
            var element_id = pick_random_element(elements_animation_urls);
            console.log("now animating "+ element_id);
            console.log(element_id);
            var animation_url = elements_animation_urls[element_id] + "?p" + new Date().getTime();//workaroud gif caching.
            $("#"+element_id).children()[1].src = animation_url;
            var audio = $("#"+element_id).children('audio')[0];
            audio.play();
            var reset_interval = setInterval(random_reset(), 2000);
            }

            function random_reset() {
                var element = pick_random_element(elements_animation_urls);
                console.log("now reseting" + element);
                var img = $("#"+element).children()[1];
                img.src = elements_original_urls[element];
                var audio = $("#"+element).children('audio')[0];
                audio.play();
            }

            function pick_random_element(elements) {
                var element_id;
                var counter = 0;
                for (var element in elements) {
                    if (Math.random() < 1 / ++counter) {
                        element_id = element;
                    }
                }
                return element_id;
            }
    </script>
</body>
</html>